### **记录一下前后端分离的知识**


#### 前后端开发的历史

##### 一、jsp一把梭时代
这个时代就是web1.0时代，没有那么多框架，也没有ajax，也没有mvc，都没有，是最开始的web开发，页面是jsp，php开发，服务端返回什么就展示什么，控制层也都在server那里。

部署：也是一个tomcat或者apache就可以了，可以快速开发也不分前后端就是一体的web开发。

组件化：这个时期也有组件化的概念的，就是jsp作为组件使用


缺点也是有的：
1. service越来越大，越来越复杂，
2. 团队协作中，前端开发者简单的修改就有一串的上线操作，本地开发，代码上传，验证等。
3. jsp的使用，导致越来越大，越来越难维护

简单来说这个时期意识到了前后端分离的职责，分工合理性，以及可维护性，这个可维护性不是代码的书写而更多的是工程化，前端后端可以独立开发

##### 二、MVC时代
mvc时代就是以后端出发，建立了mvc体系进行开发，mvc是一个协作模式，将一整块系统分为三部分，各司其职，这时候的前端可以使用各种模版虽然模版里没有java代码，但是分工清晰了。
这时候的工作模式大概是这样子：前端去写demo，然后写好了以后给后端，后端去根据demo修改为使用的模版，中间如果出问题需要前端后端一起去修改。这个时候还没有ajax，都是靠模版通信的。

缺点：
1. 前端还是过度依赖环境，前端无法随时绑定环境，测试困难
2. 前后端没办法各司其职，看似分离，其实前端只是个写demo的，具体的模版部分还在后端执行
3. 难搞的地方就是C层，这一层的路由控制，逻辑控制由于没有ajax,所以必须是前后端揉杂在一起，非常难搞。


##### 三、SPA和Ajax使用
这个时候由于ajax的出现，前端不需要只能靠模版去传递数据和更新，可以通过ajax接口调用，可以使用js实现复杂的逻辑控制，这时候就可以选择是ajax直接接口调用还是静态资源处理了。

缺点：
1. 接口的约定方面，前后端在约定接口的时候会出现很多问题，而且有些东西要通过复杂的接口完成，(所以出现了grahql)
2. 前端由于ajax的出现，可以控制C层了，但是还会出现前后端复杂性的问题。C层到底是写在哪的问题。

##### 四、MV*的出现
MV* 我理解为框架的时代，和上一个时代其实没有本质的区别，只是这时候对于前端出现了大量的框架，比如VUE，REACT，Angularjs等等，所以对于后端开发并没有什么改变，也可能是我不知道，对于前端，可以专注本地开发，本地模拟测试，前端可以使用模版简单的分层，对C层的开发提供了便利性。部署也可以相对对立了，我觉得部署的方便应该是取决于webpack的完善

缺点也是有的：
1. 由于是spa是异步的，是编译的js去渲染html，所以对于SEO是不利的，所以有需要SSR做配合，
2. Spa并不能覆盖所有场景，还是得配合后端进行。

##### 五、中间层（node）时代
加入中间层，这一层往往是node，进行和前端一起进行搭建服务，这一层中可以去控制登陆，路由，鉴权，简单逻辑控制等操作，将后端完全隔离为server层。
而这个时候的中间层都是js这就可以复用代码，也可以完美解决SEO的问题，也可以做转发拼接，rpc服务之类的功能，看着有点像是回归了最原始的形式但是应该是更深的一步进化。

缺点就是前端工程师对服务端要有进一步了解。


#### 前后端分离的开发部署
1. 开发时，前端启服务，后端启服务，
   部署时：后前端将项目打包为静态资源，由后端控制路由，登陆，然后进行对前端静态资源的控制，前端部分控制前端路由，权限交给后端，前端无感知。访问时访问后端服务，由后端服务进行路由操作
   个人：聊天室，TTMS2.0

2.  开发时，前端后端各启一个服务，通过接口互相沟通，完全分离，由前端控制登陆，路由，只通过后端接口进行逻辑和登陆验证。
    部署时前端，后端分别部署，然后用户访问前端服务，前端服务调用后端服务
    个人：网盘，TTMS，医疗，点评
    
3. node层作为前端中间层，由node+前端文件作为前端部分，然后前端就控制 逻辑和登陆等操作，以及UI部分。
   部署时由前端，后端分开部署，然后访问前端node服务，由node服务控制权限路由，控制页面的显示，调用后端接口。
   公司：审核后台项目

公司使用1，2，3都使用，但是使用node作为中间层需要前端这里大量的node稳定性维护成本，而且前端开发并不像后端一样熟悉和能够维护服务。还是1，2比较稳定些。


参考文献：

[基于node的前后端分离](https://www.kancloud.cn/kancloud/midway/)
[web研发模式](https://github.com/lifesinger/blog/issues/184)